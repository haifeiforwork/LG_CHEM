<%/***************************************************************************************//*   System Name  	: g-HR              																												*//*   1Depth Name		: Organization & Staffing                                                  													*//*   2Depth Name  	: Personnel Info                                                    															*//*   Program Name 	: Emergency Contacts																										*//*   Program ID   		: F76DeptEmergencyContactsUsa.jsp                                   												*//*   Description  		: 부서별 비상연락망 조회를 위한 jsp 파일                      																	*//*   Note         		: 없음                                                        																				*//*   Creation     		: 2010-10-11 jungin                                           																*//*   Update       :2017/08/28 eunha [CSR ID:3456352] 직급체계개편 후 직위/직책 표시 기준 변경에 따른 시스템 변경 요청 건      *//***************************************************************************************/%><%@ page contentType="text/html; charset=utf-8" %><%@ include file="../common/commonProcess.jsp" %><%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %><%@ page import="com.common.constant.Area" %><%@ page import="hris.F.F76DeptEmergencyContactsDataUsa" %><%@ page import="hris.N.AES.AESgenerUtil" %><%@ page import="java.util.Vector" %><%    request.setCharacterEncoding("utf-8");    WebUserData user = (WebUserData)session.getAttribute("user");        	//세션    String deptId = WebUtil.nvl(request.getParameter("hdn_deptId"));  		//부서코드    String deptNm = (WebUtil.nvl(request.getParameter("hdn_deptNm")));	//부서명    Vector DeptEmergencyContacts_vt = (Vector)request.getAttribute("DeptEmergencyContacts_vt");    String chkAll = request.getParameter("chek_all");    if (chkAll == null) {        chkAll = "";    }    String chck_yeno = WebUtil.nvl((String)request.getParameter("chck_yeno"),(String)request.getAttribute("checkYn"));     //하위부서여부.%><jsp:include page="/include/header.jsp"/><SCRIPT LANGUAGE="JavaScript">    <!--    //조회에 의한 부서ID와 그에 따른 조회.    function setDeptID(deptId, deptNm){        frm = document.form1;        frm.hdn_deptId.value = deptId;        frm.hdn_deptNm.value = deptNm;        frm.hdn_excel.value = "";        document.form1.page.value = '';        frm.action = "<%= WebUtil.ServletURL %>hris.F.F76DeptEmergencyContactsUsaSV";        frm.target = "_self";        frm.submit();    }    //Execl Down 하기.    function excelDown() {        frm = document.form1;        frm.hdn_excel.value = "ED";        frm.action = "<%= WebUtil.ServletURL %>hris.F.F76DeptEmergencyContactsUsaSV";        frm.target = "hidden";        frm.submit();        frm.hdn_excel.value = "";    }    //--></SCRIPT><jsp:include page="/include/body-header.jsp">    <jsp:param name="click" value="Y"/></jsp:include><form name="form1" method="post" onsubmit="return false">    <input type="hidden" name="hdn_deptId"  value="<%=deptId%>">    <input type="hidden" name="hdn_deptNm"  value="<%=deptNm%>">    <input type="hidden" name="hdn_excel"   value="">    <input type="hidden" name="chck_yeno" value="<%=chck_yeno%>" >    <h2 class="subtitle"><spring:message code='LABEL.F.FCOMMON.0001'/><!--부서명  --> : <%=WebUtil.nvl(deptNm, user.e_obtxt)%></h2>    <%        //부서명, 조회된 건수.        if ( DeptEmergencyContacts_vt != null && DeptEmergencyContacts_vt.size() > 0 ) {    %>    <div class="listArea">        <div class="listTop">            <div class="listCnt"><<!--총--><spring:message code='LABEL.F.FCOMMON.0006'/> <%=DeptEmergencyContacts_vt.size()%><!--건--><spring:message code='LABEL.F.FCOMMON.0007'/>></div>            <div class="buttonArea">                <ul class="btn_mdl">                    <li><a  onClick="javascript:excelDown();" class="unloading"><span><spring:message code="LABEL.F.F31.0001" /><!-- Excel Download --></span></a></li>                </ul>            </div>            <div class="clear"></div>        </div>        <div class="wideTable" style="border-top: 2px solid #c8294b;">            <table class="listTable">                <thead>                <tr>                    <th nowrap><spring:message code="LABEL.F.F72.0001" /><!-- Corp. --></th>                    <th nowrap><spring:message code="LABEL.F.F72.0002" /><!-- Pers. No. --></th>                    <th nowrap><spring:message code="LABEL.F.F72.0003" /><!-- Name --></th>                    <th nowrap><spring:message code="LABEL.F.F72.0004" /><!-- Org. Unit --></th>                    <th nowrap><spring:message code="LABEL.F.F72.0005" /><!-- Res.of Office --></th>		            <%--CSR ID:3456352] 직급체계개편 후 직위/직책 표시 기준 변경에 따른 시스템 변경 요청 건 start--%>                    <%--<th nowrap><spring:message code="LABEL.F.F72.0006" /><!-- Title of Level --></th> --%>                    <th nowrap><spring:message code='MSG.A.A01.0083'/><!-- 직위/직급호칭 --></th>					<%--CSR ID:3456352] 직급체계개편 후 직위/직책 표시 기준 변경에 따른 시스템 변경 요청 건 end--%>                    <th nowrap><spring:message code="LABEL.F.F72.0007" /><!-- Level/Annu. --></th>                    <th nowrap><spring:message code="LABEL.F.F72.0008" /><!-- Hiring Date --></th>                    <th nowrap><spring:message code="LABEL.F.F76.0001" /><!-- Relationship --></th>                    <th nowrap><spring:message code="LABEL.F.F76.0002" /><!-- Rel. Name --></th>                    <th nowrap><spring:message code="LABEL.F.F76.0003" /><!-- Emerg. Ph#1 --></th>                    <th nowrap><spring:message code="LABEL.F.F76.0004" /><!-- Emerg. Ph#2 --></th>                </tr>                </thead>                <%                    for( int i = 0; i < DeptEmergencyContacts_vt.size(); i++ ){                        F76DeptEmergencyContactsDataUsa data = (F76DeptEmergencyContactsDataUsa)DeptEmergencyContacts_vt.get(i);                %>                <tr class="<%=WebUtil.printOddRow(i)%>">                    <td nowrap>&nbsp;<%= data.NAME1 %>&nbsp;</td>                    <td nowrap><a style="cursor: pointer;" onclick="parent.popupView('orgView','1024','700','<%= AESgenerUtil.encryptAES(data.PERNR, request) %>');"><font color=blue><%= data.PERNR %></font></a></td>                    <td nowrap>&nbsp;<%= data.ENAME %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.ORGTX %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.JIKKT %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.JIKWT %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.VGLST %>&nbsp;</td>                    <td nowrap>&nbsp;<%= (data.DAT01).replace("-","").replace(".","").equals("00000000") ? "" : WebUtil.printDate(data.DAT01) %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.RLSHPTX %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.RLNAME %>&nbsp;</td>                    <td nowrap>&nbsp;<%= WebUtil.insertStr(data.EMGPH1, "-", "3-3-4") %>&nbsp;</td>                    <td class="lastCol" nowrap>&nbsp;<%= WebUtil.insertStr(data.EMGPH2, "-", "3-3-4") %>&nbsp;</td>                </tr>                <%                    } //end for...                %>            </table>        </div>        <div class="buttonArea">            <ul class="btn_mdl">                <li><a href="javascript:excelDown();"><span><spring:message code="LABEL.F.F31.0001" /><!-- Excel Download --></span></a></li>            </ul>        </div>    </div>    <%        }else{    %>    <div class="align_center">        <p><spring:message code="MSG.F.FCOMMON.0002"/><!-- 해당하는 데이터가 존재하지 않습니다. --></p>    </div>    <%        } //end if...    %></form><!-- 페이지 처리를 위한 FORM --><jsp:include page="/include/body-footer.jsp"/><jsp:include page="/include/footer.jsp"/>