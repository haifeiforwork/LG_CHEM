<%/***************************************************************************************//*   System Name  	: g-HR              																												*//*   1Depth Name  	: Organization & Staffing                                               														*//*   2Depth Name  	: Personnel Info                                               																*//*   Program Name 	: Expiry of Contract                                  																		*//*   Program ID   		: F72ExpiryOfContractEurp.jsp                             																*//*   Description  		: 계약만료현황 정보 조회를 위한 jsp 파일 [유럽용]                                            							*//*   Note         		:                                                         																			*//*   Creation     		: 2010-07-22 yji                                    																			*//*   Update				: 2010-10-13 jungin @v1.0 Duration(Month) 필드 추가.																*//*                           2017/08/28 eunha [CSR ID:3456352] 직급체계개편 후 직위/직책 표시 기준 변경에 따른 시스템 변경 요청 건  *//***************************************************************************************/%><%@ page contentType="text/html; charset=utf-8" %><%@ include file="../common/commonProcess.jsp" %><%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %><%@ page import="com.sns.jdf.util.*" %><%@ page import="hris.common.*" %><%@ page import="hris.common.rfc.*" %><%@ page import="hris.common.util.*" %><%@ page import="hris.F.*" %><%    request.setCharacterEncoding("utf-8");    WebUserData user = (WebUserData)session.getAttribute("user");          	//세션    WebUserData user_m = (WebUserData)session.getAttribute("user_m");   	//세션    String jobid = WebUtil.nvl(request.getParameter("jobid"));    String deptId = WebUtil.nvl(request.getParameter("hdn_deptId"));  			//부서코드    String deptNm = (WebUtil.nvl(request.getParameter("hdn_deptNm")));  		//부서명    String begda = "";    String endda = "";    begda = WebUtil.nvl((String)request.getAttribute("begda"));    endda = WebUtil.nvl((String)request.getAttribute("endda"));    Vector Dept4YearValuation_vt = (Vector)request.getAttribute("Dept4YearValuation_vt");    if (Dept4YearValuation_vt == null) {        Dept4YearValuation_vt = (Vector)session.getAttribute("Dept4YearValuation_vt");        String checkYn = WebUtil.nvl((String)request.getAttribute("checkYn"));     //하위부서여부.        //하위부서여부.        if (checkYn.equals("")) {            request.setAttribute("checkYn", request.getParameter("chck_yeno"));        }    }    String chck_yeno = WebUtil.nvl((String)request.getParameter("chck_yeno"),(String)request.getAttribute("checkYn"));     //하위부서여부.%><c:set var="BEGDA" value="<%=begda %>" /><c:set var="ENDDA" value="<%=endda %>" /><jsp:include page="/include/header.jsp"/><SCRIPT LANGUAGE="JavaScript">    <!--    //조회에 의한 부서ID와 그에 따른 조회.    function setDeptID(deptId, deptNm) {        frm = document.form1;        frm.jobid.value = "search";        document.form1.page.value = '';        frm.hdn_deptId.value = deptId;        frm.hdn_deptNm.value = deptNm;        frm.hdn_excel.value = "";        frm.target = "_self";        frm.BEGDA.value = removePoint(frm.BEGDA.value);        frm.ENDDA.value = removePoint(frm.ENDDA.value);        // 하위조직포함이고 LG Chem(50000000) 은 데이타가 많아서 막음. - 2005.03.30 윤정현        if (deptId == "50000000" && frm.chk_organAll.checked == true) {            alert("<spring:message code='MSG.F.F41.0003'/>"); //선택하신 조직은 데이터가 너무 많습니다. \n\n하위조직을 선택하여 조회하시기 바랍니다.            return;        }        //부서선택시SV를 호출하여, 분기페이지를 결정한다.        frm.action = "<%= WebUtil.ServletURL %>hris.F.F72ExpiryOfContractUsaSV";        frm.submit();    }    //Execl Down 하기.    function excelDown() {        frm = document.form1;        frm.hdn_excel.value = "ED";        frm.hdn_searchBtnClickYn.value = "Y";        frm.BEGDA.value = removePoint(frm.BEGDA.value);        frm.ENDDA.value = removePoint(frm.ENDDA.value);        frm.action = "<%= WebUtil.ServletURL %>hris.F.F72ExpiryOfContractUsaSV";        frm.target = "hidden";        frm.submit();        frm.hdn_excel.value = "";    }    //Start Date, End Date에 따른 조회    function showList() {        var frm = document.form1;        frm.jobid.value = "search";        frm.hdn_searchBtnClickYn.value = "Y";        frm.BEGDA.value = removePoint(frm.BEGDA.value);        frm.ENDDA.value = removePoint(frm.ENDDA.value);        frm.hdn_excel.value = "";        frm.action = "<%= WebUtil.ServletURL %>hris.F.F72ExpiryOfContractUsaSV";        frm.method = "post" ;        frm.target = "_self";        frm.submit() ;    }    //--></SCRIPT><jsp:include page="/include/body-header.jsp">    <jsp:param name="click" value="Y"/></jsp:include><form name="form1" method="post" onsubmit="return false">    <input type="hidden" name="hdn_deptId"  value="<%=deptId%>">    <input type="hidden" name="hdn_deptNm"  value="<%=deptNm%>">    <input type="hidden" name="hdn_excel"   value="">    <input type="hidden" name="chck_yeno" value="<%=chck_yeno%>" >    <input type="hidden" name="hdn_searchBtnClickYn" value="N">    <input type="hidden" name="jobid" value="<%= jobid %>">    <h2 class="subtitle"><spring:message code='LABEL.F.FCOMMON.0001'/><!--부서명  --> : <%=WebUtil.nvl(deptNm, user.e_obtxt)%></h2>    <div class="tableInquiry">        <%-- 검색 공통 --%>        <table>            <tr>                <th><spring:message code="LABEL.F.F72.0017" /><!-- Date of Expiry --></th>                <td >                    <input id="BEGDA" name="BEGDA" class="date" type="text" size="11" maxlenth="10" value="${f:printDate(begda) }">                    ~                    <input id="ENDDA" name="ENDDA" class="date" type="text"  size="11" maxlenth="10" value="${f:printDate(endda) }">                </td>                <td>                    <div class="tableBtnSearch">                        <a href="javascript:;" onclick="showList()" class="search"><span><spring:message code="BUTTON.COMMON.SEARCH" /><!-- 조회 --></span></a>                    </div>                </td>            </tr>        </table>    </div>    <%        //부서명, 조회된 건수.        if (Dept4YearValuation_vt != null && Dept4YearValuation_vt.size() > 0) {    %>    <div class="listArea">        <div class="listTop">            <div class="listCnt"><<!--총--><spring:message code='LABEL.F.FCOMMON.0006'/> <%=Dept4YearValuation_vt.size()%><!--건--><spring:message code='LABEL.F.FCOMMON.0007'/>></div>            <div class="buttonArea">                <ul class="btn_mdl">                    <li><a  onClick="javascript:excelDown();" class="unloading"><span><spring:message code="LABEL.F.F31.0001" /><!-- Excel Download --></span></a></li>                </ul>            </div>            <div class="clear"></div>        </div>        <div class="wideTable" style="border-top: 2px solid #c8294b;">            <table class="listTable">                <thead>                <tr>                    <th nowrap><spring:message code="LABEL.F.F72.0001" /><!-- Corp. --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0002" /><!-- Pers.No --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0003" /><!-- Name --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0004" /><!-- Org.Unit --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0005" /><!-- Res.of Office --></td>            		<%--CSR ID:3456352] 직급체계개편 후 직위/직책 표시 기준 변경에 따른 시스템 변경 요청 건 start--%>            		<%--<th nowrap><spring:message code="LABEL.F.F72.0006" /><!-- Title of Level --></td> --%>            		<th nowrap><spring:message code='MSG.A.A01.0083'/><!-- 직위/직급호칭 --></td>            		<%--CSR ID:3456352] 직급체계개편 후 직위/직책 표시 기준 변경에 따른 시스템 변경 요청 건 end--%>                    <th nowrap><spring:message code="LABEL.F.F72.0007" /><!-- Level / Annu. --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0008" /><!-- Hiring Date --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0009" /><!-- Start Date --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0010" /><!-- End Date --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0011" /><!-- Duration<br>(Month) --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0012" /><!-- Contract Type --></td>                </tr>                </thead>                <%                    for( int i = 0; i < Dept4YearValuation_vt.size(); i++ ){                        F72ExpiryOfContractDataEurp data = (F72ExpiryOfContractDataEurp)Dept4YearValuation_vt.get(i);                        int duRat;                        duRat = Integer.parseInt(data.DURAT);                %>                <tr class="borderRow">                    <td nowrap>&nbsp;<%= data.NAME1 %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.PERNR %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.ENAME %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.ORGTX %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.JIKKT %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.JIKWT %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.JIKCT %> / <%= data.ANNUL %>&nbsp;</td>                    <td nowrap>&nbsp;<%= (data.DAT01).replace("-","").replace(".","").equals("00000000") ? "" : WebUtil.printDate(data.DAT01) %>&nbsp;</td>                    <td nowrap>&nbsp;<%= (data.BEGDA).replace("-","").replace(".","").equals("00000000") ? "" : WebUtil.printDate(data.BEGDA) %>&nbsp;</td>                    <td nowrap>&nbsp;<%= (data.ENDDA).replace("-","").replace(".","").equals("00000000") ? "" : WebUtil.printDate(data.ENDDA) %>&nbsp;</td>                    <td nowrap style="text-align:center;">&nbsp;<%= duRat %>&nbsp;</td>                    <td nowrap>&nbsp;<%= data.CTTXT %>&nbsp;</td>                </tr>                <%                    } //end for...                %>            </table>        </div>        <div class="buttonArea">            <ul class="btn_mdl">                <li><a href="javascript:excelDown();"><span><spring:message code="LABEL.F.F31.0001"/><!-- Excel Download --></span></a></li>            </ul>        </div>    </div>    <%    }else{    %>    <div class="listArea">        <div class="listTop">            <div class="listCnt"><<!--총--><spring:message code='LABEL.F.FCOMMON.0006'/> <%=Dept4YearValuation_vt.size()%><!--건--><spring:message code='LABEL.F.FCOMMON.0007'/>></div>            <div class="clear"></div>        </div>        <div class="wideTable" style="border-top: 2px solid #c8294b;">            <table class="listTable">                <thead>                <tr>                    <th nowrap><spring:message code="LABEL.F.F72.0001" /><!-- Corp. --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0002" /><!-- Pers.No --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0003" /><!-- Name --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0004" /><!-- Org.Unit --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0005" /><!-- Res.of Office --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0006" /><!-- Title of Level --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0007" /><!-- Level / Annu. --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0008" /><!-- Hiring Date --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0009" /><!-- Start Date --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0010" /><!-- End Date --></td>                    <th nowrap><spring:message code="LABEL.F.F72.0011" /><!-- Duration<br>(Month) --></td>                    <th class="lastCol" nowrap><spring:message code="LABEL.F.F72.0012" /><!-- Contract Type --></td>                </tr>                </thead>                <tr class="oddRow">                <td class="lastCol" colSpan="12"><spring:message code="MSG.F.FCOMMON.0002"/><!-- 해당하는 데이터가 존재하지 않습니다. --></td>                </tr>             </table>          </div>    </div>    <%        } //end if...    %></form><jsp:include page="/include/body-footer.jsp"/><jsp:include page="/include/footer.jsp"/>