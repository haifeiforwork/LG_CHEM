package servlet.hris.D.D11TaxAdjust;import java.sql.*;import java.util.*;import javax.servlet.*;import javax.servlet.http.*;import com.sns.jdf.*;import com.sns.jdf.db.*;import com.sns.jdf.util.*;import com.sns.jdf.servlet.*;import hris.common.*;import hris.common.util.*;import hris.common.db.*;import hris.common.rfc.*;import hris.D.D11TaxAdjust.*;import hris.D.D11TaxAdjust.rfc.*;/** * D11TaxAdjustPreWorkSV.java * 연말정산 - 전근무지를 신청/수정/조회할 수 있도록 하는 Class * * @author  김도신 * @version 1.0, 2005/12/01 */public class D11TaxAdjustPreWorkSV extends EHRBaseServlet {    protected void performTask(HttpServletRequest req, HttpServletResponse res) throws GeneralException {        try{        	//ApLog        	String ctrl = "";        	String cnt = "0";        	String[] val = null;            HttpSession session = req.getSession(false);            WebUserData user    = (WebUserData)session.getAttribute("user");            Box         box     = WebUtil.getBox(req);            D11TaxAdjustPreWorkRFC   rfc   = new D11TaxAdjustPreWorkRFC();            D11TaxAdjustYearCheckRFC rfc_o = new D11TaxAdjustYearCheckRFC();            D11TaxAdjustHouseHoleCheckRFC   rfcHS      = new D11TaxAdjustHouseHoleCheckRFC();            Vector preWork_vt    = new Vector();            Vector preWorkHeadNm_vt    = new Vector();            String dest       = "";            String jobid      = "";            String targetYear = box.get("targetYear");             String o_flag     = "";              if( targetYear.equals("") ){                targetYear = ((TaxAdjustFlagData)session.getAttribute("taxAdjust")).targetYear;            }            jobid = box.get("jobid");            if( jobid.equals("") ){                jobid = "first";            }             preWorkHeadNm_vt = rfc.getPreWorkHeaderNm( user.empNo, targetYear );            Logger.debug.println(this, "preWorkHeadNm_vt.java jobid = " + jobid+" vt:"+preWorkHeadNm_vt.toString());            if(jobid.equals("first")){                preWork_vt = rfc.getPreWork( user.empNo, targetYear );                preWorkHeadNm_vt = rfc.getPreWorkHeaderNm( user.empNo, targetYear );//              2002.12.04. 연말정산 확정여부 조회                o_flag = rfc_o.getO_FLAG( user.empNo, targetYear );                req.setAttribute( "targetYear", targetYear );                req.setAttribute( "preWork_vt", preWork_vt );                req.setAttribute( "preWorkHeadNm_vt", preWorkHeadNm_vt );                req.setAttribute( "o_flag"    , o_flag     );                req.setAttribute( "rowCount"  , "3"        );                if( preWork_vt != null && preWork_vt.size() > 0 ) {    // 조회                    dest = WebUtil.JspURL+"D/D11TaxAdjust/D11TaxAdjustPreWorkDetail.jsp";                } else {                                               // 입력                    //dest = WebUtil.JspURL+"D/D11TaxAdjust/D11TaxAdjustPreWorkBuild.jsp";                	dest = WebUtil.JspURL+"D/D11TaxAdjust/D11TaxAdjustPreWorkChange.jsp";                }                //ApLog                ctrl = "12";            } else if(jobid.equals("build")){                int preWork_count = box.getInt("preWork_count");                for( int i = 0 ; i < preWork_count ; i++ ) {                    D11TaxAdjustPreWorkData data = new D11TaxAdjustPreWorkData();                    String idx = Integer.toString(i);                      data.MANDT = box.get("MANDT" );	// 클라이언트                    data.BEGDA = box.get("BEGDA"); //시작일                    data.ENDDA = box.get("ENDDA");	//종료일                    data.PERNR = box.get("PERNR" );	//사원번호                    data.SEQNR = box.get("SEQNR" + idx);	//순번                                              data.BIZNO = box.get("BIZNO" + idx);	//이전근무지사업장번호/납세조합사업장번호                    data.COMNM = box.get("COMNM" + idx);	//이전근무지사업장번호/납세조합사업장번호                    data.TXPAS = box.get("TXPAS" + idx);	//납세조합 구분                    data.PABEG = box.get("PABEG" + idx);	//근무시작일자                    data.PAEND = box.get("PAEND" + idx);	//근무종료일자                    data.EXBEG = box.get("EXBEG" + idx);	//감면시작일자                    data.EXEND = box.get("EXEND" + idx);	//감면종료일자                    data.LGA01 = box.get("LGA01" + idx);	//임금 유형                    data.BET01 = box.get("BET01" + idx);	//금액                    data.LGA02 = box.get("LGA02" + idx);	//임금 유형                    data.BET02 = box.get("BET02" + idx);	//금액                    data.LGA03 = box.get("LGA03" + idx);	//임금 유형                    data.BET03 = box.get("BET03" + idx);	//금액                    data.LGA04 = box.get("LGA04" + idx);	//임금 유형                    data.BET04 = box.get("BET04" + idx);	//금액                     data.LGA05 = box.get("LGA05" + idx);	//임금 유형                    data.BET05 = box.get("BET05" + idx);	//금액                    data.LGA06 = box.get("LGA06" + idx);	//임금 유형                    data.BET06 = box.get("BET06" + idx);	//금액                    data.LGA07 = box.get("LGA07" + idx);	//임금 유형                    data.BET07 = box.get("BET07" + idx);	//금액                    data.LGA08 = box.get("LGA08" + idx);	//임금 유형                    data.BET08 = box.get("BET08" + idx);	//금액                    data.LGA09 = box.get("LGA09" + idx);	//임금 유형                    data.BET09 = box.get("BET09" + idx);	//금액                    data.LGA10 = box.get("LGA10" + idx);	//임금 유형                    data.BET10 = box.get("BET10" + idx);	//금액                    data.LGA11 = box.get("LGA11" + idx);	//임금 유형                    data.BET11 = box.get("BET11" + idx);	//금액                    data.LGA12 = box.get("LGA12" + idx);	//임금 유형                    data.BET12 = box.get("BET12" + idx);	//금액                    data.LGA13 = box.get("LGA13" + idx);	//임금 유형                    data.BET13 = box.get("BET13" + idx);	//금액                    data.LGA14 = box.get("LGA14" + idx);	//임금 유형                    data.BET14 = box.get("BET14" + idx);	//금액                    data.LGA15 = box.get("LGA15" + idx);	//임금 유형                    data.BET15 = box.get("BET15" + idx);	//금액                    data.LGA16 = box.get("LGA16" + idx);	//임금 유형                    data.BET16 = box.get("BET16" + idx);	//금액                    data.LGA17 = box.get("LGA17" + idx);	//임금 유형                    data.BET17 = box.get("BET17" + idx);	//금액                    data.LGA18 = box.get("LGA18" + idx);	//임금 유형                    data.BET18 = box.get("BET18" + idx);	//금액                    data.LGA19 = box.get("LGA19" + idx);	//임금 유형                    data.BET19 = box.get("BET19" + idx);	//금액                    data.LGA20 = box.get("LGA20" + idx);	//임금 유형                    data.BET20 = box.get("BET20" + idx);	//금액                    data.LGA21 = box.get("LGA21" + idx);	//임금 유형                    data.BET21 = box.get("BET21" + idx);	//금액                    data.LGA22 = box.get("LGA22" + idx);	//임금 유형                    data.BET22 = box.get("BET22" + idx);	//금액                    data.LGA23 = box.get("LGA23" + idx);	//임금 유형                    data.BET23 = box.get("BET23" + idx);	//금액                    data.LGA24 = box.get("LGA24" + idx);	//임금 유형                    data.BET24 = box.get("BET24" + idx);	//금액                    data.LGA25 = box.get("LGA25" + idx);	//임금 유형                    data.BET25 = box.get("BET25" + idx);	//금액                    data.LGA26 = box.get("LGA26" + idx);	//임금 유형                    data.BET26 = box.get("BET26" + idx);	//금액                    data.LGA27 = box.get("LGA27" + idx);	//임금 유형                    data.BET27 = box.get("BET27" + idx);	//금액                    data.LGA28 = box.get("LGA28" + idx);	//임금 유형                    data.BET28 = box.get("BET28" + idx);	//금액                    data.LGA29 = box.get("LGA29" + idx);	//임금 유형                    data.BET29 = box.get("BET29" + idx);	//금액                    data.LGA30 = box.get("LGA30" + idx);	//임금 유형                    data.BET30 = box.get("BET30" + idx);	//금액                    data.LGA31 = box.get("LGA31" + idx);	//임금 유형                    data.BET31 = box.get("BET31" + idx);	//금액                    data.LGA32 = box.get("LGA32" + idx);	//임금 유형                    data.BET32 = box.get("BET32" + idx);	//금액                    data.LGA33 = box.get("LGA33" + idx);	//임금 유형                    data.BET33 = box.get("BET33" + idx);	//금액                    data.LGA34 = box.get("LGA34" + idx);	//임금 유형                    data.BET34 = box.get("BET34" + idx);	//금액                    data.LGA35 = box.get("LGA35" + idx);	//임금 유형                    data.BET35 = box.get("BET35" + idx);	//금액                    data.LGA36 = box.get("LGA36" + idx);	//임금 유형                    data.BET36 = box.get("BET36" + idx);	//금액                    data.LGA37 = box.get("LGA37" + idx);	//임금 유형                    data.BET37 = box.get("BET37" + idx);	//금액                    data.LGA38 = box.get("LGA38" + idx);	//임금 유형                    data.BET38 = box.get("BET38" + idx);	//금액                    data.LGA39 = box.get("LGA39" + idx);	//임금 유형                    data.BET39 = box.get("BET39" + idx);	//금액                    data.LGA40 = box.get("LGA40" + idx);	//임금 유형                    data.BET40 = box.get("BET40" + idx);	//금액                    data.LGA41 = box.get("LGA41" + idx);	//임금 유형                    data.BET41 = box.get("BET41" + idx);	//금액                    data.LGA42 = box.get("LGA42" + idx);	//임금 유형                    data.BET42 = box.get("BET42" + idx);	//금액                    data.LGA43 = box.get("LGA43" + idx);	//임금 유형                    data.BET43 = box.get("BET43" + idx);	//금액                    data.LGA44 = box.get("LGA44" + idx);	//임금 유형                    data.BET44 = box.get("BET44" + idx);	//금액                    data.LGA45 = box.get("LGA45" + idx);	//임금 유형                    data.BET45 = box.get("BET45" + idx);	//금액                     if ( !data.COMNM.equals("") && !data.BIZNO.equals("") )                         preWork_vt.addElement(data);                    //ApLog                    if(i==0){                    	val = new String[12];	                    val[0] = data.MANDT;	                    val[1] = data.BEGDA;	                    val[2] = data.ENDDA;	                    val[3] = data.PERNR;	                    val[4] = data.SEQNR;	                    val[5] = data.BIZNO;	                    val[6] = data.COMNM;	                    val[7] = data.TXPAS;	                    val[8] = data.PABEG;	                    val[9] = data.PAEND;	                    val[10] = data.EXBEG;	                    val[11] = data.EXEND;                    }                }                rfc.build( user.empNo, targetYear, preWork_vt );                String FSTID     = box.get("FSTID")      ;    //세대주체크여부                rfcHS.build(user.empNo,targetYear,targetYear+"0101",targetYear+"1231",FSTID);                String msg = "msg007";                String url = "location.href = '" + WebUtil.ServletURL+"hris.D.D11TaxAdjust.D11TaxAdjustPreWorkSV?targetYear="+targetYear+"';";                req.setAttribute("msg", msg);                req.setAttribute("url", url);                dest = WebUtil.JspURL+"common/msg.jsp";                //ApLog                                ctrl = "11";                cnt = String.valueOf(preWork_vt.size());            } else if(jobid.equals("change_first")){                preWork_vt = rfc.getPreWork( user.empNo, targetYear );                req.setAttribute( "targetYear", targetYear );                req.setAttribute( "preWorkHeadNm_vt", preWorkHeadNm_vt );                req.setAttribute( "preWork_vt", preWork_vt );                req.setAttribute( "rowCount"  , "3"        );                dest = WebUtil.JspURL+"D/D11TaxAdjust/D11TaxAdjustPreWorkChange.jsp";                //ApLog                                ctrl = "12";            } else if(jobid.equals("change")){                int preWork_count = box.getInt("preWork_count");                Logger.debug.println(this, "preWork_count = "  +preWork_count);                for( int i = 0 ; i < preWork_count ; i++ ) {                    D11TaxAdjustPreWorkData data = new D11TaxAdjustPreWorkData();                    String idx = Integer.toString(i);                     data.MANDT = box.get("MANDT" );	// 클라이언트                    data.BEGDA = box.get("BEGDA"); //시작일                    data.ENDDA = box.get("ENDDA");	//종료일                    data.PERNR = box.get("PERNR" );	//사원번호                    data.SEQNR = box.get("SEQNR" + idx);	//순번                               data.BIZNO = box.get("BIZNO" + idx);	//이전근무지사업장번호/납세조합사업장번호                    data.COMNM = box.get("COMNM" + idx);	//이전근무지사업장번호/납세조합사업장번호                    data.TXPAS = box.get("TXPAS" + idx);	//납세조합 구분                    data.PABEG = box.get("PABEG" + idx);	//근무시작일자                    data.PAEND = box.get("PAEND" + idx);	//근무종료일자                    data.EXBEG = box.get("EXBEG" + idx);	//감면시작일자                    data.EXEND = box.get("EXEND" + idx);	//감면종료일자                    data.LGA01 = box.get("LGA01" + idx);	//임금 유형                    data.BET01 = box.get("BET01" + idx);	//금액                    data.LGA02 = box.get("LGA02" + idx);	//임금 유형                    data.BET02 = box.get("BET02" + idx);	//금액                    data.LGA03 = box.get("LGA03" + idx);	//임금 유형                    data.BET03 = box.get("BET03" + idx);	//금액                    data.LGA04 = box.get("LGA04" + idx);	//임금 유형                    data.BET04 = box.get("BET04" + idx);	//금액                     data.LGA05 = box.get("LGA05" + idx);	//임금 유형                    data.BET05 = box.get("BET05" + idx);	//금액                    data.LGA06 = box.get("LGA06" + idx);	//임금 유형                    data.BET06 = box.get("BET06" + idx);	//금액                    data.LGA07 = box.get("LGA07" + idx);	//임금 유형                    data.BET07 = box.get("BET07" + idx);	//금액                    data.LGA08 = box.get("LGA08" + idx);	//임금 유형                     data.BET08 = box.get("BET08" + idx);	//금액                    data.LGA09 = box.get("LGA09" + idx);	//임금 유형                    data.BET09 = box.get("BET09" + idx);	//금액                    data.LGA10 = box.get("LGA10" + idx);	//임금 유형                    data.BET10 = box.get("BET10" + idx);	//금액                    data.LGA11 = box.get("LGA11" + idx);	//임금 유형                    data.BET11 = box.get("BET11" + idx);	//금액                    data.LGA12 = box.get("LGA12" + idx);	//임금 유형                    data.BET12 = box.get("BET12" + idx);	//금액                    data.LGA13 = box.get("LGA13" + idx);	//임금 유형                    data.BET13 = box.get("BET13" + idx);	//금액                    data.LGA14 = box.get("LGA14" + idx);	//임금 유형                    data.BET14 = box.get("BET14" + idx);	//금액                    data.LGA15 = box.get("LGA15" + idx);	//임금 유형                    data.BET15 = box.get("BET15" + idx);	//금액                    data.LGA16 = box.get("LGA16" + idx);	//임금 유형                    data.BET16 = box.get("BET16" + idx);	//금액                    data.LGA17 = box.get("LGA17" + idx);	//임금 유형                    data.BET17 = box.get("BET17" + idx);	//금액                    data.LGA18 = box.get("LGA18" + idx);	//임금 유형                    data.BET18 = box.get("BET18" + idx);	//금액                    data.LGA19 = box.get("LGA19" + idx);	//임금 유형                    data.BET19 = box.get("BET19" + idx);	//금액                    data.LGA20 = box.get("LGA20" + idx);	//임금 유형                    data.BET20 = box.get("BET20" + idx);	//금액                    data.LGA21 = box.get("LGA21" + idx);	//임금 유형                    data.BET21 = box.get("BET21" + idx);	//금액                    data.LGA22 = box.get("LGA22" + idx);	//임금 유형                    data.BET22 = box.get("BET22" + idx);	//금액                    data.LGA23 = box.get("LGA23" + idx);	//임금 유형                    data.BET23 = box.get("BET23" + idx);	//금액                    data.LGA24 = box.get("LGA24" + idx);	//임금 유형                    data.BET24 = box.get("BET24" + idx);	//금액                    data.LGA25 = box.get("LGA25" + idx);	//임금 유형                    data.BET25 = box.get("BET25" + idx);	//금액                    data.LGA26 = box.get("LGA26" + idx);	//임금 유형                    data.BET26 = box.get("BET26" + idx);	//금액                     data.LGA27 = box.get("LGA27" + idx);	//임금 유형                    data.BET27 = box.get("BET27" + idx);	//금액                    data.LGA28 = box.get("LGA28" + idx);	//임금 유형                    data.BET28 = box.get("BET28" + idx);	//금액                    data.LGA29 = box.get("LGA29" + idx);	//임금 유형                    data.BET29 = box.get("BET29" + idx);	//금액                    data.LGA30 = box.get("LGA30" + idx);	//임금 유형                    data.BET30 = box.get("BET30" + idx);	//금액                    data.LGA31 = box.get("LGA31" + idx);	//임금 유형                    data.BET31 = box.get("BET31" + idx);	//금액                    data.LGA32 = box.get("LGA32" + idx);	//임금 유형                    data.BET32 = box.get("BET32" + idx);	//금액                     data.LGA33 = box.get("LGA33" + idx);	//임금 유형                    data.BET33 = box.get("BET33" + idx);	//금액                    data.LGA34 = box.get("LGA34" + idx);	//임금 유형                    data.BET34 = box.get("BET34" + idx);	//금액                    data.LGA35 = box.get("LGA35" + idx);	//임금 유형                    data.BET35 = box.get("BET35" + idx);	//금액                    data.LGA36 = box.get("LGA36" + idx);	//임금 유형                     data.BET36 = box.get("BET36" + idx);	//금액                    data.LGA37 = box.get("LGA37" + idx);	//임금 유형                    data.BET37 = box.get("BET37" + idx);	//금액                    data.LGA38 = box.get("LGA38" + idx);	//임금 유형                    data.BET38 = box.get("BET38" + idx);	//금액                    data.LGA39 = box.get("LGA39" + idx);	//임금 유형                    data.BET39 = box.get("BET39" + idx);	//금액                    data.LGA40 = box.get("LGA40" + idx);	//임금 유형                    data.BET40 = box.get("BET40" + idx);	//금액                    data.LGA41 = box.get("LGA41" + idx);	//임금 유형                    data.BET41 = box.get("BET41" + idx);	//금액                    data.LGA42 = box.get("LGA42" + idx);	//임금 유형                    data.BET42 = box.get("BET42" + idx);	//금액                    data.LGA43 = box.get("LGA43" + idx);	//임금 유형                    data.BET43 = box.get("BET43" + idx);	//금액                    data.LGA44 = box.get("LGA44" + idx);	//임금 유형                     data.BET44 = box.get("BET44" + idx);	//금액                    data.LGA45 = box.get("LGA45" + idx);	//임금 유형                    data.BET45 = box.get("BET45" + idx);	//금액                       data.FLAG1 = box.get("FLAG1" + idx);	//화학DATA마이그레이션                     if (box.get("FLAG1" + idx).equals("Z") ){                          data.UNAME = box.get("UNAME" + idx);                           data.AEDTM = box.get("AEDTM" + idx);                     }else {                        data.UNAME = "SAPESS"  ;	                        data.AEDTM = DataUtil.getCurrentDate();//변경일                     	                    }                                         if ( !data.COMNM.equals("") && !data.BIZNO.equals("") )                        preWork_vt.addElement(data);                    //ApLog                    if(i==0){                    	val = new String[12];	                    val[0] = data.MANDT;	                    val[1] = data.BEGDA;	                    val[2] = data.ENDDA;	                    val[3] = data.PERNR;	                    val[4] = data.SEQNR;	                    val[5] = data.BIZNO;	                    val[6] = data.COMNM;	                    val[7] = data.TXPAS;	                    val[8] = data.PABEG;	                    val[9] = data.PAEND;	                    val[10] = data.EXBEG;	                    val[11] = data.EXEND;                    }                }                rfc.build( user.empNo, targetYear, preWork_vt );                 String FSTID     = box.get("FSTID")      ;    //세대주체크여부                 rfcHS.build(user.empNo,targetYear,targetYear+"0101",targetYear+"1231",FSTID);                String msg = "msg002";                String url = "location.href = '" + WebUtil.ServletURL+"hris.D.D11TaxAdjust.D11TaxAdjustPreWorkSV?targetYear="+targetYear+"';";                req.setAttribute("msg", msg);                req.setAttribute("url", url);                dest = WebUtil.JspURL+"common/msg.jsp";                //ApLog                                ctrl = "11";                cnt = String.valueOf(preWork_vt.size());            } else if(jobid.equals("AddorDel")){                int    preWork_count = box.getInt("preWork_count");                String curr_job   = box.getString("curr_job");                String rowCount   = box.getString("preWork_count");//              2002.12.04. 연말정산 확정여부 조회                o_flag = rfc_o.getO_FLAG( user.empNo, targetYear );            Logger.debug.println(this, " curr_job = " + curr_job);                for( int i = 0 ; i < preWork_count ; i++ ) {                    D11TaxAdjustPreWorkData data = new D11TaxAdjustPreWorkData();                    String idx = Integer.toString(i);                    data.MANDT = box.get("MANDT" );	// 클라이언트                    data.BEGDA = box.get("BEGDA"); //시작일                    data.ENDDA = box.get("ENDDA");	//종료일                    data.PERNR = box.get("PERNR" );	//사원번호                    data.SEQNR = box.get("SEQNR" + idx);	//순번                                  data.BIZNO = box.get("BIZNO" + idx);	//이전근무지사업장번호/납세조합사업장번호                    data.COMNM = box.get("COMNM" + idx);	//이전근무지사업장번호/납세조합사업장번호                    data.TXPAS = box.get("TXPAS" + idx);	//납세조합 구분                    data.PABEG = box.get("PABEG" + idx);	//근무시작일자                    data.PAEND = box.get("PAEND" + idx);	//근무종료일자                    data.EXBEG = box.get("EXBEG" + idx);	//감면시작일자                    data.EXEND = box.get("EXEND" + idx);	//감면종료일자                    data.LGA01 = box.get("LGA01" + idx);	//임금 유형                    data.BET01 = box.get("BET01" + idx);	//금액                    data.LGA02 = box.get("LGA02" + idx);	//임금 유형                    data.BET02 = box.get("BET02" + idx);	//금액                    data.LGA03 = box.get("LGA03" + idx);	//임금 유형                    data.BET03 = box.get("BET03" + idx);	//금액                    data.LGA04 = box.get("LGA04" + idx);	//임금 유형                    data.BET04 = box.get("BET04" + idx);	//금액                     data.LGA05 = box.get("LGA05" + idx);	//임금 유형                    data.BET05 = box.get("BET05" + idx);	//금액                    data.LGA06 = box.get("LGA06" + idx);	//임금 유형                    data.BET06 = box.get("BET06" + idx);	//금액                    data.LGA07 = box.get("LGA07" + idx);	//임금 유형                    data.BET07 = box.get("BET07" + idx);	//금액                    data.LGA08 = box.get("LGA08" + idx);	//임금 유형                    data.BET08 = box.get("BET08" + idx);	//금액                    data.LGA09 = box.get("LGA09" + idx);	//임금 유형                    data.BET09 = box.get("BET09" + idx);	//금액                    data.LGA10 = box.get("LGA10" + idx);	//임금 유형                    data.BET10 = box.get("BET10" + idx);	//금액                    data.LGA11 = box.get("LGA11" + idx);	//임금 유형                    data.BET11 = box.get("BET11" + idx);	//금액                    data.LGA12 = box.get("LGA12" + idx);	//임금 유형                    data.BET12 = box.get("BET12" + idx);	//금액                    data.LGA13 = box.get("LGA13" + idx);	//임금 유형                    data.BET13 = box.get("BET13" + idx);	//금액                    data.LGA14 = box.get("LGA14" + idx);	//임금 유형                    data.BET14 = box.get("BET14" + idx);	//금액                    data.LGA15 = box.get("LGA15" + idx);	//임금 유형                    data.BET15 = box.get("BET15" + idx);	//금액                    data.LGA16 = box.get("LGA16" + idx);	//임금 유형                    data.BET16 = box.get("BET16" + idx);	//금액                    data.LGA17 = box.get("LGA17" + idx);	//임금 유형                    data.BET17 = box.get("BET17" + idx);	//금액                    data.LGA18 = box.get("LGA18" + idx);	//임금 유형                    data.BET18 = box.get("BET18" + idx);	//금액                    data.LGA19 = box.get("LGA19" + idx);	//임금 유형                    data.BET19 = box.get("BET19" + idx);	//금액                    data.LGA20 = box.get("LGA20" + idx);	//임금 유형                    data.BET20 = box.get("BET20" + idx);	//금액                    data.LGA21 = box.get("LGA21" + idx);	//임금 유형                    data.BET21 = box.get("BET21" + idx);	//금액                    data.LGA22 = box.get("LGA22" + idx);	//임금 유형                    data.BET22 = box.get("BET22" + idx);	//금액                    data.LGA23 = box.get("LGA23" + idx);	//임금 유형                    data.BET23 = box.get("BET23" + idx);	//금액                    data.LGA24 = box.get("LGA24" + idx);	//임금 유형                    data.BET24 = box.get("BET24" + idx);	//금액                    data.LGA25 = box.get("LGA25" + idx);	//임금 유형                    data.BET25 = box.get("BET25" + idx);	//금액                    data.LGA26 = box.get("LGA26" + idx);	//임금 유형                    data.BET26 = box.get("BET26" + idx);	//금액                    data.LGA27 = box.get("LGA27" + idx);	//임금 유형                    data.BET27 = box.get("BET27" + idx);	//금액                    data.LGA28 = box.get("LGA28" + idx);	//임금 유형                    data.BET28 = box.get("BET28" + idx);	//금액                    data.LGA29 = box.get("LGA29" + idx);	//임금 유형                    data.BET29 = box.get("BET29" + idx);	//금액                    data.LGA30 = box.get("LGA30" + idx);	//임금 유형                    data.BET30 = box.get("BET30" + idx);	//금액                    data.LGA31 = box.get("LGA31" + idx);	//임금 유형                    data.BET31 = box.get("BET31" + idx);	//금액                    data.LGA32 = box.get("LGA32" + idx);	//임금 유형                    data.BET32 = box.get("BET32" + idx);	//금액                    data.LGA33 = box.get("LGA33" + idx);	//임금 유형                    data.BET33 = box.get("BET33" + idx);	//금액                    data.LGA34 = box.get("LGA34" + idx);	//임금 유형                    data.BET34 = box.get("BET34" + idx);	//금액                    data.LGA35 = box.get("LGA35" + idx);	//임금 유형                    data.BET35 = box.get("BET35" + idx);	//금액                    data.LGA36 = box.get("LGA36" + idx);	//임금 유형                    data.BET36 = box.get("BET36" + idx);	//금액                    data.LGA37 = box.get("LGA37" + idx);	//임금 유형                    data.BET37 = box.get("BET37" + idx);	//금액                    data.LGA38 = box.get("LGA38" + idx);	//임금 유형                    data.BET38 = box.get("BET38" + idx);	//금액                    data.LGA39 = box.get("LGA39" + idx);	//임금 유형                    data.BET39 = box.get("BET39" + idx);	//금액                    data.LGA40 = box.get("LGA40" + idx);	//임금 유형                    data.BET40 = box.get("BET40" + idx);	//금액                    data.LGA41 = box.get("LGA41" + idx);	//임금 유형                    data.BET41 = box.get("BET41" + idx);	//금액                    data.LGA42 = box.get("LGA42" + idx);	//임금 유형                    data.BET42 = box.get("BET42" + idx);	//금액                    data.LGA43 = box.get("LGA43" + idx);	//임금 유형                    data.BET43 = box.get("BET43" + idx);	//금액                    data.LGA44 = box.get("LGA44" + idx);	//임금 유형                    data.BET44 = box.get("BET44" + idx);	//금액                    data.LGA45 = box.get("LGA45" + idx);	//임금 유형                    data.BET45 = box.get("BET45" + idx);	//금액                      preWork_vt.addElement(data);                }                req.setAttribute( "targetYear", targetYear );                req.setAttribute( "preWork_vt"   , preWork_vt    );                req.setAttribute( "preWorkHeadNm_vt", preWorkHeadNm_vt );                req.setAttribute( "o_flag"    , o_flag     );                req.setAttribute( "rowCount"  , rowCount );                if ( curr_job.equals("build") ) {    // 입력화면                    dest = WebUtil.JspURL+"D/D11TaxAdjust/D11TaxAdjustPreWorkBuild.jsp";                } else {                             // 입력                    dest = WebUtil.JspURL+"D/D11TaxAdjust/D11TaxAdjustPreWorkChange.jsp";                }            } else {                throw new BusinessException(g.getMessage("MSG.COMMON.0016"));            }            Logger.debug.println(this, " destributed = " + dest);            //ApLog 생성            if(jobid.equals("first")||jobid.equals("build")||jobid.equals("change_first")||jobid.equals("change")){            	ApLoggerWriter.writeApLog("연말정산", "전근무지", "D11TaxAdjustPreWorkSV", "전근무지", ctrl, cnt, val, user, req.getRemoteAddr());            }            printJspPage(req, res, dest);        } catch(Exception e) {            throw new GeneralException(e);        }	}}