package	servlet.hris.D;import java.io.*;import java.sql.*;import java.util.Vector;import javax.servlet.*;import javax.servlet.http.*;import com.sns.jdf.*;import com.sns.jdf.db.*;import com.sns.jdf.util.*;import com.sns.jdf.servlet.*;import hris.common.*;import hris.D.D11TaxAdjust.*;import hris.D.D11TaxAdjust.rfc.*;/** * D12IncomePrintSV.java * 소득공제신고서 출력을 위한 Class * * @author 김성일 * @version 1.0, 2002/01/21 */public class D12IncomePrintSV extends EHRBaseServlet {	protected void performTask(HttpServletRequest req, HttpServletResponse res) throws GeneralException {        try{        	//ApLog        	String ctrl = "";        	String cnt = "0";        	String[] val = null;            HttpSession  session          = req.getSession(false);            WebUserData  user             = (WebUserData)session.getAttribute("user");            String print_seq 				= (String) session.getAttribute("PNT_SEQ"); //@2014 연말정산 소득공제신고서 seq 추가            Box          box              = WebUtil.getBox(req);//            D11TaxAdjustRFC        rfc              = new D11TaxAdjustRFC();            //D11TaxAdjustReturnData returnData       = null;            //Vector                 personalRed_vt   = null;             //Vector                 specialRed_vt    = null;              //Vector                 etcRed_vt        = null;                          String dest  = "";            String jobid = box.get("jobid");            if( jobid.equals("") ){                jobid = "first";            }            String targetYear = box.get("targetYear");   //[?????]  targetYear => 요거 변수명 바뀔수도 있음            if( targetYear.equals("") ){                targetYear = ((TaxAdjustFlagData)session.getAttribute("taxAdjust")).targetYear;            }            if( jobid.equals("first") ){                String print_page_name = WebUtil.ServletURL + "hris.D.D12IncomePrintSV?jobid=print&targetYear="+targetYear;                req.setAttribute( "print_page_name", print_page_name );                dest =  WebUtil.JspURL + "common/printFrame.jsp";                //ApLog                ctrl = "22";            } else if( jobid.equals("print") ){                D11TaxAdjustPersonRFC  rfc01 = new D11TaxAdjustPersonRFC();                D11TaxAdjustSpecialRFC rfc02 = new D11TaxAdjustSpecialRFC();                //D11TaxAdjustEduRFC     rfc03 = new D11TaxAdjustEduRFC();                D11TaxAdjustEducationRFC rfc03 = new D11TaxAdjustEducationRFC();                D11TaxAdjustTaxRFC     rfc04 = new D11TaxAdjustTaxRFC();                D11TaxAdjustMedicalRFC rfc05 = new D11TaxAdjustMedicalRFC();                D11TaxAdjustFamilyRFC  rfc06 = new D11TaxAdjustFamilyRFC();                D11TaxAdjustPreWorkRFC rfc07 = new D11TaxAdjustPreWorkRFC();                D11TaxAdjustPensionRFC  rfc08 = new D11TaxAdjustPensionRFC();                D11TaxAdjustRentRFC       rfc09        = new D11TaxAdjustRentRFC();                Vector person_vt = new Vector();                Vector special_vt = new Vector();                Vector edu_vt     = new Vector();                Vector tax_vt      = new Vector();                Vector medi_vt    = new Vector();                Vector family_vt  = new Vector();                Vector preWork_vt = new Vector();                Vector preWorkHeadNm_vt = new Vector();                Vector pension_vt = new Vector();                 Vector rent_vt = new Vector();                                 person_vt  = rfc01.getPerson( user.empNo, targetYear );                special_vt = rfc02.getSpecial( user.empNo, targetYear,"1" );                edu_vt     = rfc03.getEdu( user.empNo, targetYear );                tax_vt     = rfc04.getTax( user.empNo, targetYear,"1" );                medi_vt    = rfc05.getMedical( user.empNo, targetYear );                family_vt  = rfc06.getFamily( user.empNo, targetYear,"1" );                preWork_vt = rfc07.getPreWork( user.empNo, targetYear );                preWorkHeadNm_vt = rfc07.getPreWorkHeaderNm( user.empNo, targetYear );            	pension_vt   = rfc08.getPension( user.empNo, targetYear );             	rent_vt   = rfc09.getRent( user.empNo, targetYear );             	                 req.setAttribute( "targetYear", targetYear );                req.setAttribute( "person_vt" , person_vt  );                req.setAttribute( "special_vt", special_vt );                req.setAttribute( "edu_vt"    , edu_vt     );                req.setAttribute( "tax_vt"    , tax_vt     );                req.setAttribute( "medi_vt"   , medi_vt    );                req.setAttribute( "family_vt" , family_vt  );                req.setAttribute( "preWork_vt", preWork_vt  );                req.setAttribute( "pension_vt" , pension_vt     );                req.setAttribute( "rent_vt" , rent_vt     );                req.setAttribute( "preWorkHeadNm_vt", preWorkHeadNm_vt  );                                req.setAttribute( "PNT_SEQ", print_seq);////@2014 연말정산 소득공제신고서 seq 추가                                dest = WebUtil.JspURL+"D/D12IncomePrint.jsp";                //ApLog                ctrl = "23";            }            Logger.debug.println( this, " destributed = " + dest );            //ApLog 생성            ApLoggerWriter.writeApLog("연말정산", "소득공신고서발행", "D12IncomePrintSV", "소득공신고서발행", ctrl, cnt, val, user, req.getRemoteAddr());            printJspPage(req, res, dest);        } catch(Exception e) {        	//Logger.error(e);            throw new GeneralException(e);        }	}}