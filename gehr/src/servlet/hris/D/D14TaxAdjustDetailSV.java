package servlet.hris.D;import java.util.Vector;import javax.servlet.http.*;import com.sns.jdf.*;import com.sns.jdf.util.*;import com.sns.jdf.servlet.*;import hris.common.*;import hris.D.*;import hris.D.rfc.*;/** * D14TaxAdjustDetailSV.java * 연말정산공제 결과조회 할 수 있도록 하는 Class * * @author 김성일 * @version 1.0, 2002/01/31 /Y79 :_특별공제_주택저당차입금이자공제액 추가 특별공제 > 주택자금(주택임차원리금상환액·월세액·저당차입이자상환액) 의 금액에 추가 * @version 2.0 2014/01/17  C20140106_63914 ABART : 국내 *, ''  해외  S 해외근무기간(1~6월), T 해외근무기간(7~12월) L 국내근무기간  항목 추가되어 구조변경 * 															       /YSP 한부모가족 /YAA 특별공제 종합한도 초과액 추가 *                  2015-05-18  [CSR ID:2778743] 연말정산 내역조회 화면 수정 *                  2015-06-16  [CSR ID:2801522] 해외근무자 연말정산 open */public class D14TaxAdjustDetailSV extends EHRBaseServlet {    //private String UPMU_TYPE ="";            // 결재 업무타입(연말정산공제)	protected void performTask(HttpServletRequest req, HttpServletResponse res) throws GeneralException    {        //Connection con = null;        try{            HttpSession  session          = req.getSession(false);            WebUserData  user             = (WebUserData)session.getAttribute("user");            Box          box              = WebUtil.getBox(req);            String dest       = "";            String jobid      = "";            jobid = box.get("jobid");            if( jobid.equals("") ){                jobid = "first";            }            String targetYear = box.get("targetYear");            if( targetYear.equals("") ){                targetYear = ((TaxAdjustFlagData)session.getAttribute("taxAdjust")).targetYear;            }            // 총소득, 총비과세소득등의 데이터를 가져오자            D14TaxAdjustDetailRFC  rfc  = new D14TaxAdjustDetailRFC();            //D14TaxAdjustData d14TaxAdjustData = (D14TaxAdjustData)rfc.detail( user.empNo, targetYear );            //C20140106_63914            Vector d14TaxAdjustData_vt = rfc.detail( user.empNo, targetYear );            //[CSR ID:2778743] 연말정산 내역조회 화면 수정            //[CSR ID:2801522] 해외근무자 연말정산 open            String notCngP = "N";            for(int i = 0; i <d14TaxAdjustData_vt.size() ; i++){            D14TaxAdjustData data = 	(D14TaxAdjustData)d14TaxAdjustData_vt.get(i);	            int temp = data.notCngPerson;	            if(temp == 0){	            	notCngP = "Y";	            }            }            req.setAttribute("notChgP", notCngP);            //Logger.debug.println(this,d14TaxAdjustData_vt.toString());            req.setAttribute( "targetYear"      , targetYear);            req.setAttribute( "d14TaxAdjustData_vt", d14TaxAdjustData_vt);            dest = WebUtil.JspURL+"D/D14TaxAdjustDetail.jsp";           // Logger.debug.println(this, " destributed = " + dest);            //ApLog 생성            ApLoggerWriter.writeApLog("연말정산", "연말정산내역조회", "D14TaxAdjustDetailSV", "연말정산내역조회", "12", "0", null, user,req.getRemoteAddr());            printJspPage(req, res, dest);        } catch(Exception e) {            throw new GeneralException(e);        }	}}